(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[111],{2473:(e,t,s)=>{Promise.resolve().then(s.bind(s,7203))},5033:(e,t,s)=>{"use strict";s.d(t,{F:()=>l});let l=s(2651).A.create({baseURL:"http://localhost:3333"})},7203:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>F});var l=s(5155),n=s(2115),a=s(6046),r=s(5565),i=s(7769),o=s(5033),d=s(4057);let c=e=>{let{sessionId:t,sessionUser:s}=e,n=(0,a.useRouter)();console.log(t,s);let c=async()=>{console.log(t,null==s?void 0:s.id);try{await o.F.put("session/".concat(t,"/leave"),{sessionId:t,userId:null==s?void 0:s.id}),console.log(null==s?void 0:s.id),localStorage.removeItem("name"),n.push("/")}catch(e){console.log("Error to leave",e)}};return(0,l.jsxs)("div",{className:"flex items-center justify-between mx-20 lg:mb-0 xl:mb-4",children:[(0,l.jsx)(r.default,{src:i.A,width:120,height:90,alt:"logo",priority:!0}),(0,l.jsx)("div",{onClick:c,children:(0,l.jsx)(d.adK,{className:"w-8 h-7 text-marine rounded-md hover:text-greenblue"})})]})},u=e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase();var m=s(3391);let x=e=>{let{name:t,isCurrent:s,userId:n,avatar:a}=e,{data:i}=(0,m.d4)(e=>e.session),o=null==i?void 0:i.hostId;return(0,l.jsxs)("div",{className:"border w-full h-20 rounded-xl p-3 bg-background flex items-center gap-3 cursor-pointer transition-colors duration-300 \n      ".concat(s?"bg-blue-300 border-neutral-200 shadow-lg":"hover:bg-blue-200 border-neutral-200"),children:[a&&(0,l.jsx)(r.default,{src:a,width:50,height:50,alt:"avatar",className:"rounded-full",priority:!0}),(0,l.jsxs)("div",{className:"flex flex-col",children:[t&&(0,l.jsx)("span",{className:"font-semibold",children:u(t)}),o===n&&(0,l.jsx)("span",{className:"text-xs mt-1 text-yellow-700 bg-yellow-100 px-2 py-0.5 rounded-full w-fit",children:"Host"})]})]})};var h=s(1665),g=s(2885),p=s(5018),f=s(3519),b=s(4985);let v=e=>{let{users:t,sessionLink:s}=e,[a,r]=(0,n.useState)(!1),{data:i}=(0,m.d4)(e=>e.session),[o,d]=(0,n.useState)(!0),c=null==i?void 0:i.currentUser;(0,n.useEffect)(()=>{let e=setTimeout(()=>{d(!1)},8e3);return()=>clearTimeout(e)},[]);let u=(0,p.Ay)(e=>{let{className:t,...s}=e;return(0,l.jsx)(f.A,{...s,classes:{popper:t}})})(()=>({["& .".concat(b.A.tooltip)]:{backgroundColor:"#3B82F6",color:"#f9fafb",fontSize:"0.875rem",padding:"10px 14px",borderRadius:"8px",maxWidth:220},["& .".concat(b.A.arrow)]:{color:"#3B82F6"}}));return(0,l.jsxs)("section",{className:"flex flex-col mt-6 sm:mt-6 md:mt-0",children:[(0,l.jsx)(h.N9,{}),(0,l.jsxs)("div",{className:"flex flex-col justify-between min-h-[600px] w-[340px] p-4 bg-white rounded-2xl shadow-lg border border-neutral-200",children:[(0,l.jsx)("div",{className:"flex flex-col gap-2 overflow-y-auto pr-2 max-h-[480px]",children:null==t?void 0:t.map(e=>(0,l.jsx)(x,{name:e.name,avatar:e.avatar,userId:e.id,isCurrent:(null==c?void 0:c.id)===e.id},e.id))}),s&&(0,l.jsx)("div",{className:"mt-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-2 p-3 border border-gray-200 rounded-xl shadow-sm bg-gray-50",children:[(0,l.jsx)("input",{type:"text",className:"flex-1 px-3 py-2 text-sm text-gray-600 bg-transparent focus:outline-none",value:"".concat(s.substring(0,32),"..."),readOnly:!0}),(0,l.jsx)(u,{title:"Share with others to play!",open:o&&!a,arrow:!0,placement:"top",disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,children:(0,l.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(s||""),r(!0),(0,h.oR)("Invite your friends! =)"),setTimeout(()=>r(!1),2e3)},className:"flex items-center justify-center px-3 py-2 rounded-lg transition-all duration-200 ".concat(a?"bg-green-500 text-white":"bg-blue-500 text-white hover:bg-blue-600"),children:a?(0,l.jsx)("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",strokeWidth:"2",viewBox:"0 0 16 12",children:(0,l.jsx)("path",{d:"M1 5.917 5.724 10.5 15 1.5"})}):(0,l.jsx)(g.WXx,{})})})]})})]})]})};var w=s(5683),y=s(8606);let j=e=>{switch(e){case"thumb":return"\uD83D\uDC4D";case"laugh":return"\uD83D\uDE02";case"surprise":return"\uD83D\uDE2E";case"heart":return"❤️";default:return"❓"}},N=["thumb","laugh","surprise","heart"],A=e=>{let{onReact:t,reactions:s}=e,[a,r]=(0,n.useState)([]),i=e=>{t(e);let s=j(e),l=Date.now();r(e=>[...e,{id:l,emoji:s}]),setTimeout(()=>{r(e=>e.filter(e=>e.id!==l))},1500)},o=[...null!=s?s:[]].sort((e,t)=>N.indexOf(e.name)-N.indexOf(t.name));return(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("div",{className:"absolute inset-0 pointer-events-none",children:(0,l.jsx)(w.N,{children:a.map(e=>{let{id:t,emoji:s}=e;return(0,l.jsx)(y.P.div,{initial:{y:0,opacity:1,scale:1},animate:{y:-100,opacity:0,scale:1.5},exit:{opacity:0},transition:{duration:1.2,ease:"easeOut"},className:"absolute left-1/2 top-1/2 text-3xl",style:{transform:"translate(-50%, -50%)"},children:s},t)})})}),(0,l.jsx)("div",{className:"flex gap-4 mt-4 flex-wrap justify-center",children:null==o?void 0:o.map(e=>(0,l.jsxs)("button",{onClick:()=>i(e.name),className:"flex items-center gap-2 px-4 md:py-2 rounded-full shadow-md text-lg transition font-medium bg-background text-blue-900",children:[j(e.name),(0,l.jsx)("span",{className:"text-sm",children:e.amount})]},e.name))})]})};var I=s(9812);let k=e=>{let{onApproved:t}=e,{loading:s,data:n}=(0,m.d4)(e=>e.session),{sessionId:r}=(0,a.useParams)(),i=(0,m.wA)(),d=null==n?void 0:n.currentQuestion,c=async e=>{if(null==d?void 0:d.id){i((0,I.r1)(!0));try{var s;let l=await o.F.post("/questions/modify",{questionId:null==d?void 0:d.id,tone:e,sessionId:r}),n=null===(s=l.data)||void 0===s?void 0:s.modified;n?(await o.F.patch("/questions/".concat(d.id),{name:n,sessionId:r}),t&&t()):i((0,I.Nh)("Modified text not found."))}catch(t){let e=(null==t?void 0:t.message)||"Error when fetching";i((0,I.Nh)(e))}finally{i((0,I.r1)(!1))}}};return(0,l.jsxs)("div",{className:"bg-background rounded-2xl px-8 py-4 mt-1 lg:mt-4 w-fit mx-auto shadow-md mb-2 lg:mb-4",children:[(0,l.jsx)("p",{className:"text-center text-sm font-semibold text-gray-600 mb-3",children:"Use AI to make it"}),(0,l.jsxs)("div",{className:"flex flex-wrap justify-center gap-3",children:[(0,l.jsx)("button",{className:"bg-white text-gray-500 text-sm font-bold px-4 py-2 rounded-full shadow-md hover:bg-blue-500 hover:text-white transition",onClick:()=>c("funnier"),disabled:s,children:"funnier"}),(0,l.jsx)("button",{className:"bg-white text-gray-500 text-sm font-bold px-4 py-2 rounded-full shadow-md hover:bg-blue-500 hover:text-white transition",onClick:()=>c("serious"),disabled:s,children:"serious"}),(0,l.jsx)("button",{className:"bg-white text-gray-500 text-sm font-bold px-4 py-2 rounded-full shadow-md hover:bg-blue-500 hover:text-white transition",onClick:()=>c("exciting"),disabled:s,children:"exciting"})]})]})};var S=s(5888);let C=e=>{let{updateToNextUser:t,updateToNextQuestion:s,sessionUser:n,sessionId:a}=e,{data:i,loading:d}=(0,m.d4)(e=>e.session),c=null==i?void 0:i.currentQuestion;console.log(c);let x=null==i?void 0:i.currentUser,h=null==i?void 0:i.hostId,g=async e=>{if((null==n?void 0:n.id)&&(null==c?void 0:c.id))try{await o.F.post("/session/".concat(a,"/toggle"),{userId:null==n?void 0:n.id,questionId:null==c?void 0:c.id,reactionName:e,sessionId:a})}catch(e){console.log("unknown error:",e)}};return console.log(c),(0,l.jsx)("section",{className:"flex items-center justify-center px-1 md:px-2 lg:px-4 w-[348px] h-[100%] lg:w-full",children:(0,l.jsxs)("div",{className:"max-w-[600px] w-full flex flex-col items-center justify-center p-8 bg-white rounded-2xl shadow-lg border border-neutral-200",children:[(0,l.jsx)("div",{className:"flex items-center justify-center w-full h-[80px] sm:h-80px md-[90px] lg:[96px] mb-2",children:(null==x?void 0:x.avatar)&&(0,l.jsx)(r.default,{src:null==x?void 0:x.avatar,width:100,height:100,alt:"user",className:"rounded-full cursor-pointer",priority:!0})}),x&&(0,l.jsx)("h2",{className:"mt-6 md:mt-8 lg:mt-8 text-xl lg:text-2xl font-black text-center mb-2",children:u(null==x?void 0:x.name)}),c&&(0,l.jsx)(A,{reactions:null==c?void 0:c.reactions,onReact:g}),(0,l.jsxs)("div",{className:"relative",children:[c&&(0,l.jsx)("h2",{className:"mt-6 md:text-lg lg:text-xl xl:text-2xl font-semibold p-3 text-center text-gray-800 mb-6 md:mb-2 lg:mb-3",children:c.name}),d&&(0,l.jsx)("div",{className:"absolute inset-0 mt-2 bg-white",children:[80,70].map((e,t)=>(0,l.jsx)(S.A,{animation:"wave",height:20,width:"".concat(e,"%"),sx:{mx:"auto",my:3}},t))})]}),h===(null==n?void 0:n.id)&&(0,l.jsx)(k,{}),h===(null==n?void 0:n.id)&&(0,l.jsxs)("div",{className:"w-full flex items-center justify-center gap-4 mt-6 sm:mt-6 md:mt-8 lg:mt-10",children:[(0,l.jsx)("button",{onClick:t,className:"w-[120px] h-[30px] sm:w-40 sm:h-10 font-semibold rounded-md bg-marine text-white lg:font-bold hover:bg-marine/80 transition",children:"Next User"}),(0,l.jsx)("button",{onClick:s,className:" w-[120px] h-[30px] sm:w-40 sm:h-10 font-semibold rounded-md bg-greenblue text-white lg:font-bold hover:bg-greenblue/80 transition",children:"Next Question"})]})]})})};var E=s(4860);let U=e=>{let{sessionId:t,setName:s,isOpen:d}=e,[c,u]=(0,n.useState)(""),x=(0,a.useRouter)(),h=(0,m.wA)(),g=async e=>{if(e.preventDefault(),c.trim())try{await o.F.put("/session/".concat(t),{name:c}),s&&s(c),h({type:"session/initSocket",payload:t}),x.push("/session/".concat(t))}catch(t){let e=(null==t?void 0:t.message)||"Error when fetching";h((0,I.Nh)(e))}};return d?(0,l.jsx)("div",{className:"fixed inset-0 w-full h-full bg-black/50 flex justify-center items-center z-50",children:(0,l.jsx)("div",{className:" flex flex-col gap-4 items-center justify-center w-[500px] max-h-[600px] bg-background rounded-lg p-6",children:(0,l.jsxs)("form",{onSubmit:g,children:[(0,l.jsx)("div",{className:"flex items-center justify-center",children:(0,l.jsx)(r.default,{src:i.A,alt:"logo",width:200,className:"cursor-pointer flex items-center justify-center"})}),(0,l.jsx)("input",{type:"text",id:"userName",placeholder:"Username",value:c,onChange:e=>u(e.target.value),className:"w-full pl-2 text-gray-700 rounded-md border-solid border-2 border-gray py-1.5 mb-2",required:!0}),(0,l.jsx)("button",{className:"rounded-md w-full bg-marine text-white mb-4 py-3 text-sm font-semibold shadow-sm ring-1 ring-inset ring-sky-600 hover:bg-greenblue disabled:cursor-not-allowed disabled:opacity-50",type:"submit",children:"Go to Room"})]})})}):(console.log("about to return null"),null)},F=()=>{let{sessionId:e}=(0,a.useParams)(),t=(0,m.wA)(),{data:s,error:r}=(0,m.d4)(e=>e.session),i=window.localStorage.getItem("name"),d=i?JSON.parse(i):void 0,[u,x]=(0,E.A)("name",d||""),h=null==s?void 0:s.users.find(e=>e.name===u);console.log(h);let g=(null==u?void 0:u.length)!==0,p=async()=>{try{await o.F.put("/session/".concat(e,"/next-question")),await o.F.get("/session/".concat(e))}catch(e){console.log("Error",e)}},f=async()=>{try{await o.F.put("/session/".concat(e,"/next-user")),await o.F.get("/session/".concat(e))}catch(e){console.log("Error",e)}};return((0,n.useEffect)(()=>{e&&(async()=>{try{t((0,I.r1)(!0)),console.log("why",e);let s=await o.F.get("/session/".concat(e));t((0,I.XO)(s.data)),t((0,I.r1)(!1)),s.data.users.some(e=>{var t;return e.id===(null===(t=s.data.currentUser)||void 0===t?void 0:t.id)})||await o.F.put("/session/".concat(e,"/next-user")),t((0,I.s_)(e))}catch(s){let e=(null==s?void 0:s.message)||"Error when fetching";t((0,I.Nh)(e))}})()},[e,u,t]),g)?(0,l.jsxs)("div",{className:"w-full min-h-screen flex flex-col mb-16 md:mb-2",children:[(0,l.jsx)(U,{sessionId:e,setName:x,isOpen:!g}),h&&(0,l.jsx)(c,{sessionId:e,sessionUser:h}),(0,l.jsxs)("div",{className:"flex flex-col md:flex-row-reverse items-center sm:items-center md:items-start justify-center mx-20 gap-6 mt-2 sm:mt-2 md:mt-0",children:[(0,l.jsx)(C,{updateToNextQuestion:p,updateToNextUser:f,sessionUser:h,sessionId:e}),(0,l.jsx)(v,{users:null==s?void 0:s.users,sessionLink:null==s?void 0:s.sessionLink})]}),r&&(0,l.jsx)("div",{className:"text-red-500",children:r})]}):(0,l.jsx)(U,{sessionId:e,setName:x,isOpen:!0})}},4860:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var l=s(2115);let n=function(e,t){let[s,n]=(0,l.useState)(t);return(0,l.useEffect)(()=>{try{let t=window.localStorage.getItem(e);null!==t&&n(JSON.parse(t))}catch(e){console.log("Erro ao ler do localStorage",e)}},[e]),(0,l.useEffect)(()=>{window.localStorage.setItem(e,JSON.stringify(s))},[e,s]),[s,n]}},9812:(e,t,s)=>{"use strict";s.d(t,{Ay:()=>c,Nh:()=>a,XO:()=>n,r1:()=>i,s_:()=>d});let l=(0,s(8943).Z0)({name:"session",initialState:{data:null,currentQuestion:null,currentUser:null,sessionId:null,hostId:null,error:"",name:"",loading:!1,users:[],reactions:[]},reducers:{setData(e,t){e.data=t.payload},setSessionId(e,t){e.sessionId=t.payload},setError(e,t){e.error=t.payload},setName(e,t){e.name=t.payload},setLoading(e,t){e.loading=t.payload},initSocket(e,t){e.sessionId=t.payload}}}),{setData:n,setError:a,setName:r,setLoading:i,setSessionId:o,initSocket:d}=l.actions,c=l.reducer},7769:(e,t,s)=>{"use strict";s.d(t,{A:()=>l});let l={src:"/_next/static/media/nav.df1d5028.png",height:1875,width:1875,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAMAAADz0U65AAAAIVBMVEXx9v/v9P76+v/m7/uv2+mZyuGOrNue1eN0ndLL5vLS4PQ2jXWgAAAACXBIWXMAAC4jAAAuIwF4pT92AAAAMklEQVR4nCWLwREAIAyDSNNadf+BPZUvAEJ8BJLAYUWA56jMXuw5qiuNFeKqW/74bXAAEsMAg9zPfZAAAAAASUVORK5CYII=",blurWidth:8,blurHeight:8}}},e=>{var t=t=>e(e.s=t);e.O(0,[949,202,505,562,364,441,517,358],()=>t(2473)),_N_E=e.O()}]);